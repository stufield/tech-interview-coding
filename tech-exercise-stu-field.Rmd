---
title: "Technical Interview: Coding"
author: "Gandalf The Grey"
date: "`r Sys.Date()`"
output:
  rmarkdown::html_document:
    fig_caption: yes
    code_folding: show
    number_sections: no
    toc: yes
    toc_float:
      collapsed: no
ratio: '9:16'
fontsize: 13pt
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
 collapse = TRUE,
 comment = "#>"
)
library(dplyr)
library(tidyr)
```


# Instructions

1. Clone the repository and create a branch for your work
1. Rename this file as instructed in the `README`
1. Add any R packages you might require in the `setup` chunk
1. Load necessary data into an R work space
1. Read Questions below and complete the answers in the code chunks provided



-----


## Load Data

Below write the code required to load the necessary data into an R work space.

```{r load}
preds <- read.csv("Predictions.csv")
bar_df <- read.csv("Barcode.csv")
```


## Questions

1. What are the steps for producing the final table (see `README`)?
1. Save the resulting table as `output.csv` and add to your branch
1. How might you design this to make it automated and/or user-friendly?
1. How would you ensure that the code/automation is robust or
   less susceptible to breaking?


--------


## Answer #1

Describe (in words) here ...

```{r Q1}
tbl <- gather(bar_df, "orig", "barcode", -SubjectId) |> select(-orig)
joined <- left_join(tbl, preds, by = "barcode") |> group_by(SubjectId)
out <- summarise(joined, mean_testA = mean(testA), mean_testB = mean(testB))
write.csv(out, "output.csv", quote = FALSE)
out
```


## Answer #2
Describe automation ... 

* Shiny App
* 


# Answer #3
Describe fragile steps ... how to make more robust ... 

* unit tests
* 

---------
